{% extends 'base.html' %}
{% load static humanize get_item %}

{% block title %}{{ schedule.title }} - 일정 상세{% endblock %}

{% block extra_css %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'css/schedule_detail.css' %}">
{% endblock %}

{% block content %}
<div class="container">
  <div class="schedule-detail">
    <h1 class="text-center mb-4">{{ schedule.title }}</h1>

    <!-- 기본 정보 -->
    <div class="info-section">
      <h2><i class="fas fa-calendar-alt"></i> 기본 정보</h2>
      <ul class="meta-list">
        <li><i class="fas fa-map-marker-alt"></i> 여행지: {{ schedule.destination }}</li>
        <li><i class="fas fa-calendar"></i> 기간: {{ schedule.start_date }} ~ {{ schedule.end_date }}</li>
      </ul>
    </div>

    <!-- 추가 정보: 카테고리 기반 -->
    <div class="info-section">
      <h2><i class="fas fa-info-circle"></i> 추가 정보</h2>
      <ul class="meta-list">
        <li>
          <i class="fas fa-bullseye"></i> 여행 목적:
          {% for purpose in schedule.travel_purpose %}
            {{ travel_purpose_labels|get_item:purpose }}{% if not forloop.last %}, {% endif %}
          {% empty %}없음{% endfor %}
        </li>
        <li>
          <i class="fas fa-star"></i> 여행 스타일:
          {% for style in schedule.travel_style %}
            {{ travel_style_labels|get_item:style }}{% if not forloop.last %}, {% endif %}
          {% empty %}없음{% endfor %}
        </li>
        <li>
          <i class="fas fa-heart"></i> 중요 요소:
          {% for factor in schedule.important_factors %}
            {{ important_factor_labels|get_item:factor }}{% if not forloop.last %}, {% endif %}
          {% empty %}없음{% endfor %}
        </li>
      </ul>
    </div>

    <!-- AI 생성 일정 -->
    <div class="section-title">AI 생성 여행 일정</div>
    {% if ai_answer %}
      <div class="ai-answer">
        {{ ai_answer|linebreaksbr }}
      </div>
    {% else %}
      <p>AI 여행 일정이 없습니다.</p>
    {% endif %}

    <!-- 버튼 -->
    <div class="text-center mt-4">
      <a href="{% url 'travel_input:schedule_update' schedule.pk %}" class="btn btn-primary">수정</a>
      <a href="{% url 'travel_input:schedule_delete' schedule.pk %}" class="btn btn-danger">삭제</a>
      <a href="{% url 'travel_input:schedule_list' %}" class="btn btn-secondary">목록으로</a>
    </div>
  </div>
</div>
{% endblock %}
