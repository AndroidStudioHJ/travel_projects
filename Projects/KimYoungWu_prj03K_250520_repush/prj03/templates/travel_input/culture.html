{% extends 'base.html' %}
{% block title %}ì—¬í–‰ ë¬¸í™” ì •ë³´{% endblock %}

{% block extra_css %}
{{ block.super }}
<style>
    body {
        /* ê°ì„± ì¼ëŸ¬ìŠ¤íŠ¸ ë°°ê²½ */
        background-image: linear-gradient(rgba(255,255,255,0.7), rgba(244,246,252,0.95)), url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1200&q=80');
        background-size: cover;
        background-attachment: fixed;
        background-position: center;
    }
    .culture-container {
        max-width: 950px;
        margin: 60px auto 40px auto;
        padding: 0 20px;
        position: relative;
    }
    .culture-hero {
        position: relative;
        background: linear-gradient(120deg, #e0e7ff 60%, #fffbe6 100%);
        border-radius: 32px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.08);
        padding: 48px 32px 36px 32px;
        margin-bottom: 36px;
        overflow: hidden;
        min-height: 220px;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }
    .culture-hero-illust {
        width: 180px;
        height: 180px;
        background: url('https://cdn.pixabay.com/photo/2017/01/31/13/14/asia-2029366_1280.png') no-repeat center/contain;
        opacity: 0.85;
        flex-shrink: 0;
    }
    .culture-hero-text {
        flex: 1;
        margin-right: 30px;
    }
    .culture-title {
        color: #007acc;
        font-size: 2.3rem;
        font-weight: 800;
        margin-bottom: 10px;
        letter-spacing: 1px;
    }
    .culture-quote {
        color: #555;
        font-size: 1.15rem;
        margin-bottom: 18px;
        font-style: italic;
    }
    .culture-mission {
        background: #fffbe6;
        border-left: 6px solid #ffd700;
        padding: 14px 22px;
        border-radius: 10px;
        color: #7a5d00;
        font-size: 1.08rem;
        font-weight: 600;
        margin-bottom: 0;
        box-shadow: 0 2px 8px rgba(255,215,0,0.07);
    }
    .influencer-quote {
        background: #e0f7fa;
        border-left: 5px solid #00bcd4;
        padding: 13px 20px;
        border-radius: 10px;
        color: #00796b;
        font-size: 1.05rem;
        font-weight: 500;
        margin: 32px 0 18px 0;
        box-shadow: 0 2px 8px rgba(0,188,212,0.07);
        display: flex;
        align-items: center;
        gap: 10px;
    }
    .influencer-avatar {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        background: url('https://randomuser.me/api/portraits/women/44.jpg') no-repeat center/cover;
        border: 2px solid #00bcd4;
        flex-shrink: 0;
    }
    .culture-section {
        background: white;
        border-radius: 20px;
        box-shadow: 0 4px 16px rgba(0,0,0,0.09);
        margin-bottom: 36px;
        padding: 36px 30px 30px 30px;
        position: relative;
        opacity: 0;
        transform: translateY(40px);
        transition: all 0.7s cubic-bezier(.4,2,.3,1);
    }
    .culture-section.visible {
        opacity: 1;
        transform: none;
    }
    .section-title {
        color: #005f99;
        font-size: 1.25rem;
        margin-bottom: 18px;
        font-weight: 700;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    .culture-list {
        display: flex;
        flex-wrap: wrap;
        gap: 18px;
        margin-bottom: 10px;
    }
    .culture-item {
        background: #f4f6fc;
        border-radius: 10px;
        padding: 14px 22px;
        font-size: 1.08rem;
        color: #333;
        box-shadow: 0 2px 6px rgba(0,0,0,0.04);
        display: flex;
        align-items: center;
        gap: 8px;
    }
    .culture-desc {
        color: #666;
        font-size: 0.98rem;
        margin-bottom: 8px;
    }
    .culture-fact {
        background: #fffbe6;
        border-left: 5px solid #ffd700;
        padding: 14px 20px;
        border-radius: 10px;
        margin: 30px 0 10px 0;
        color: #7a5d00;
        font-size: 1.05rem;
        font-weight: 500;
        box-shadow: 0 2px 8px rgba(255,215,0,0.07);
    }
    .ai-culture-btn {
        display: block;
        margin: 0 auto 24px auto;
        background: linear-gradient(90deg, #ffd700 60%, #ffe066 100%);
        color: #222;
        border: none;
        padding: 12px 32px;
        border-radius: 10px;
        font-size: 1.12rem;
        font-weight: 700;
        cursor: pointer;
        transition: background 0.2s;
        box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        letter-spacing: 1px;
    }
    .ai-culture-btn:hover {
        background: #ffe066;
    }
    #ai-culture-result {
        text-align: center;
        color: #007acc;
        font-weight: 600;
        margin-bottom: 18px;
        font-size: 1.08rem;
    }
    .culture-chatbot-btn {
        display: block;
        margin: 0 auto 32px auto;
        background: #e0e7ff;
        color: #222;
        border: none;
        padding: 10px 28px;
        border-radius: 8px;
        font-size: 1.05rem;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.2s;
        box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    }
    .culture-chatbot-btn:hover {
        background: #b3bcf5;
    }
    .culture-bg-curve {
        position: absolute;
        left: 0; right: 0; top: -60px;
        width: 100%; height: 80px;
        background: url('https://svgshare.com/i/14kA.svg') repeat-x bottom;
        opacity: 0.18;
        z-index: 0;
        pointer-events: none;
    }
    .recommend-card {
        background: #fff;
        border-radius: 16px;
        box-shadow: 0 2px 12px rgba(0,0,0,0.07);
        padding: 22px 24px 18px 24px;
        margin-bottom: 18px;
        margin-right: 12px;
        display: flex;
        flex-direction: column;
        gap: 8px;
        min-width: 220px;
        max-width: 320px;
    }
    .recommend-title {
        color: #007acc;
        font-size: 1.1rem;
        font-weight: 700;
        margin-bottom: 4px;
    }
    .recommend-desc {
        color: #555;
        font-size: 0.97rem;
        margin-bottom: 6px;
    }
    .recommend-link {
        color: #005f99;
        font-size: 0.93rem;
        text-decoration: underline;
        margin-bottom: 2px;
    }
    .recommend-badge {
        background: #e0e7ff;
        color: #005f99;
        border-radius: 8px;
        padding: 2px 10px;
        font-size: 0.85rem;
        display: inline-block;
        margin-top: 2px;
    }
    .recommend-row {
        display: flex;
        gap: 18px;
        margin: 18px 0 32px 0;
        flex-wrap: wrap;
        justify-content: flex-start;
    }
</style>
{% endblock %}

{% block content %}
<div class="culture-container">
    <div class="culture-bg-curve"></div>
    <div class="culture-hero">
        <div class="culture-hero-text">
            <h1 class="culture-title">í•œêµ­ì˜ ì—¬í–‰ ë¬¸í™”</h1>
            <div class="culture-quote">â€œì—¬í–‰ì€ ë¬¸í™”ë¥¼ ë§Œë‚˜ê³ , ë¬¸í™”ë¥¼ í†µí•´ ë‚˜ë¥¼ ë§Œë‚˜ëŠ” ì‹œê°„ì…ë‹ˆë‹¤.â€</div>
            <div class="culture-mission" id="culture-mission"></div>
        </div>
        <div class="culture-hero-illust"></div>
    </div>
    <button type="button" class="ai-culture-btn" onclick="aiCultureRecommend()">AI ë¬¸í™” ì¶”ì²œ ë°›ê¸°</button>
    <button type="button" class="culture-chatbot-btn" onclick="openCultureChatbot()">ë¬¸í™” ê¶ê¸ˆì¦ ì±—ë´‡ì—ê²Œ ë¬¼ì–´ë³´ê¸°</button>
    <div id="ai-culture-result"></div>
    <div class="influencer-quote"><div class="influencer-avatar"></div><span>â€œí•œêµ­ì˜ ì „í†µì‹œì¥ì—ì„œ ë¨¹ëŠ” ë”°ëˆí•œ ì–´ë¬µ, ê·¸ê²Œ ì§„ì§œ ì—¬í–‰ì˜ ë§›ì´ì—ìš”!â€<br><span style="font-size:0.95em; color:#0097a7;">- ì—¬í–‰ ì¸í”Œë£¨ì–¸ì„œ ì†Œë¼</span></span></div>

    <div class="culture-section">
        <div class="section-title">ğŸ¯ ì „í†µ ë¬¸í™”</div>
        <div class="culture-list">
            <div class="culture-item">ğŸ˜ï¸ í•œì˜¥ë§ˆì„</div>
            <div class="culture-item">ğŸ‘˜ í•œë³µ ì²´í—˜</div>
            <div class="culture-item">ğŸµ êµ­ì•… ê³µì—°</div>
            <div class="culture-item">ğŸ–Œï¸ ì„œì˜ˆ/ë‹¤ë„ ì²´í—˜</div>
        </div>
        <div class="culture-desc">í•œêµ­ì˜ ì „í†µë¬¸í™”ë¥¼ ì§ì ‘ ì²´í—˜í•  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ í”„ë¡œê·¸ë¨ê³¼ ì¥ì†Œê°€ ìˆìŠµë‹ˆë‹¤.</div>
    </div>

    <div class="culture-section">
        <div class="section-title">ğŸ‰ ëŒ€í‘œ ì¶•ì œ</div>
        <div class="culture-list">
            <div class="culture-item">ğŸŒ¸ ì§„í•´ êµ°í•­ì œ</div>
            <div class="culture-item">ğŸ§¼ ë³´ë ¹ ë¨¸ë“œì¶•ì œ</div>
            <div class="culture-item">ğŸ† ë¶€ì‚° ë¶ˆê½ƒì¶•ì œ</div>
            <div class="culture-item">ğŸ­ ì•ˆë™ êµ­ì œíƒˆì¶¤í˜ìŠ¤í‹°ë²Œ</div>
        </div>
        <div class="culture-desc">ê³„ì ˆë§ˆë‹¤ ì „êµ­ ê³³ê³³ì—ì„œ ë‹¤ì–‘í•œ ì¶•ì œê°€ ì—´ë ¤ ì—¬í–‰ì˜ ì¦ê±°ì›€ì„ ë”í•©ë‹ˆë‹¤.</div>
    </div>

    <div class="culture-section">
        <div class="section-title">ğŸ² ì „í†µ ìŒì‹</div>
        <div class="culture-list">
            <div class="culture-item">ğŸ¥¬ ê¹€ì¹˜</div>
            <div class="culture-item">ğŸ¥— ë¹„ë¹”ë°¥</div>
            <div class="culture-item">ğŸ¥© ë¶ˆê³ ê¸°</div>
            <div class="culture-item">ğŸ± í•œì •ì‹</div>
        </div>
        <div class="culture-desc">í•œêµ­ì˜ ë‹¤ì–‘í•œ ì „í†µ ìŒì‹ì€ ì—¬í–‰ì˜ ë˜ ë‹¤ë¥¸ ì¦ê±°ì›€ì…ë‹ˆë‹¤.</div>
    </div>

    <div class="culture-section">
        <div class="section-title">ğŸ‘ ì²´í—˜ í™œë™</div>
        <div class="culture-list">
            <div class="culture-item">ğŸ¨ ì „í†µ ê³µì˜ˆ ì²´í—˜</div>
            <div class="culture-item">ğŸ“œ í•œì§€ ë§Œë“¤ê¸°</div>
            <div class="culture-item">ğŸº ë„ìê¸° ë¹šê¸°</div>
            <div class="culture-item">ğŸ›’ ì „í†µì‹œì¥ íˆ¬ì–´</div>
        </div>
        <div class="culture-desc">ì§ì ‘ ì°¸ì—¬í•  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ ì²´í—˜ í™œë™ì´ ì¤€ë¹„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</div>
    </div>

    <div class="culture-fact" id="culture-fact"></div>

    <div class="section-title">ëœë¤ ì¶”ì²œ ê´€ê´‘ì§€</div>
    <div class="recommend-row">
        {% for rec in recommendations %}
        <div class="recommend-card">
            <div class="recommend-title">{{ rec.ê´€ê´‘ì§€ëª… }}</div>
            <div class="recommend-desc" id="desc-{{ forloop.counter }}">{{ rec.ì„¤ëª…|truncatewords:25 }}</div>
            <button type="button" class="ai-summary-btn" data-desc-id="desc-{{ forloop.counter }}" data-text="{{ rec.ì„¤ëª…|escapejs }}">AI 3ì¤„ ìš”ì•½ ë°›ê¸°</button>
            <div class="ai-summary-result" id="ai-summary-{{ forloop.counter }}" style="color:#007acc;font-size:0.97rem;margin-top:4px;"></div>
            <a class="recommend-link" href="{{ rec.ë§í¬ }}" target="_blank">ìì„¸íˆ ë³´ê¸°</a>
            <span class="recommend-badge">{{ rec.ë¶„ë¥˜ }}</span>
        </div>
        {% endfor %}
    </div>
</div>
<script>
// ëœë¤ í•œì¤„ ìƒì‹
const facts = [
    'í•œêµ­ì˜ í•œì˜¥ì€ ìì—°ê³¼ ì¡°í™”ë¥¼ ì´ë£¨ëŠ” ì „í†µ ê±´ì¶• ì–‘ì‹ì…ë‹ˆë‹¤.',
    'ê¹€ì¹˜ëŠ” ìœ ë„¤ìŠ¤ì½” ì¸ë¥˜ë¬´í˜•ë¬¸í™”ìœ ì‚°ì— ë“±ì¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤.',
    'ì§„í•´ êµ°í•­ì œëŠ” ë§¤ë…„ 4ì›”, 100ë§Œ ëª… ì´ìƒì´ ì°¾ëŠ” ë²šê½ƒ ì¶•ì œì…ë‹ˆë‹¤.',
    'í•œë³µì€ ê³„ì ˆê³¼ ìš©ë„ì— ë”°ë¼ ë‹¤ì–‘í•œ ìƒ‰ê³¼ ë””ìì¸ì´ ìˆìŠµë‹ˆë‹¤.',
    'í•œêµ­ì˜ ì „í†µì‹œì¥ì€ ì§€ì—­ë³„ë¡œ íŠ¹ìƒ‰ ìˆëŠ” ë¨¹ê±°ë¦¬ì™€ ë¬¸í™”ë¥¼ ìë‘í•©ë‹ˆë‹¤.',
    'ë³´ë ¹ ë¨¸ë“œì¶•ì œëŠ” ì„¸ê³„ 3ëŒ€ ì¶•ì œ ì¤‘ í•˜ë‚˜ë¡œ ê¼½íˆê¸°ë„ í•©ë‹ˆë‹¤.'
];
const fact = facts[Math.floor(Math.random() * facts.length)];
document.getElementById('culture-fact').textContent = 'ğŸŒŸ ' + fact;

// ì˜¤ëŠ˜ì˜ ë¬¸í™” ë¯¸ì…˜
const missions = [
    'ì˜¤ëŠ˜ì€ í•œë³µì„ ì…ê³  ì‚¬ì§„ í•œ ì¥ ë‚¨ê²¨ë³´ì„¸ìš”!',
    'ê·¼ì²˜ ì „í†µì‹œì¥ì— ê°€ì„œ í˜„ì§€ ìŒì‹ì„ ë§›ë³´ì„¸ìš”!',
    'ì „í†µ ê³µì˜ˆ ì²´í—˜ í´ë˜ìŠ¤ì— ì°¸ì—¬í•´ë³´ì„¸ìš”!',
    'í•œêµ­ì˜ ëŒ€í‘œ ì¶•ì œ ì¤‘ í•˜ë‚˜ë¥¼ ê²€ìƒ‰í•´ë³´ê³ , ë‹¤ìŒ ì—¬í–‰ì„ ê³„íší•´ë³´ì„¸ìš”!',
    'í•œì˜¥ë§ˆì„ ì‚°ì±…í•˜ë©° ì¡°ìš©í•œ ì‹œê°„ì„ ê°€ì ¸ë³´ì„¸ìš”!'
];
document.getElementById('culture-mission').textContent = 'ì˜¤ëŠ˜ì˜ ë¬¸í™” ë¯¸ì…˜: ' + missions[Math.floor(Math.random() * missions.length)];

// AI ë¬¸í™” ì¶”ì²œ(ë”ë¯¸)
function aiCultureRecommend() {
    const samples = [
        'ì˜¤ëŠ˜ì€ ì „í†µ í•œì˜¥ì—ì„œ ë‹¤ë„ ì²´í—˜ì„ í•´ë³´ëŠ” ê±´ ì–´ë–¨ê¹Œìš”?',
        'ë´„ì—ëŠ” ì§„í•´ êµ°í•­ì œ, ì—¬ë¦„ì—ëŠ” ë³´ë ¹ ë¨¸ë“œì¶•ì œê°€ ê°•ë ¥ ì¶”ì²œ!',
        'í•œë³µì„ ì…ê³  ê²½ë³µê¶ì—ì„œ ì¸ìƒìƒ· ë‚¨ê¸°ê¸°, ê°•ì¶”!',
        'ì „í†µì‹œì¥ íˆ¬ì–´ë¡œ í˜„ì§€ì¸ì²˜ëŸ¼ ì—¬í–‰í•´ë³´ì„¸ìš”!',
        'êµ­ì•… ê³µì—°ê³¼ í•¨ê»˜í•˜ëŠ” íŠ¹ë³„í•œ ë°¤, ìŠì§€ ëª»í•  ì¶”ì–µì´ ë  ê±°ì˜ˆìš”.'
    ];
    const pick = samples[Math.floor(Math.random() * samples.length)];
    document.getElementById('ai-culture-result').innerHTML = 'ğŸ¤– <b>AI ì¶”ì²œ:</b> ' + pick;
}
// ì±—ë´‡(ë”ë¯¸)
function openCultureChatbot() {
    alert('ì±—ë´‡(ë”ë¯¸): ê¶ê¸ˆí•œ ë¬¸í™” ì •ë³´ë¥¼ ì…ë ¥í•˜ë©´ AIê°€ ë‹µë³€í•´ì¤„ ì˜ˆì •ì…ë‹ˆë‹¤!');
}
// ì„¹ì…˜ë³„ ì• ë‹ˆë©”ì´ì…˜
function showSectionsOnScroll() {
    const sections = document.querySelectorAll('.culture-section');
    const trigger = window.innerHeight * 0.92;
    sections.forEach(sec => {
        const top = sec.getBoundingClientRect().top;
        if (top < trigger) sec.classList.add('visible');
    });
}
window.addEventListener('scroll', showSectionsOnScroll);
window.addEventListener('DOMContentLoaded', showSectionsOnScroll);

// AI 3ì¤„ ìš”ì•½ ë²„íŠ¼ ì´ë²¤íŠ¸
function bindAISummaryButtons() {
    document.querySelectorAll('.ai-summary-btn').forEach(function(btn) {
        btn.onclick = function() {
            const descId = btn.getAttribute('data-desc-id');
            const text = btn.getAttribute('data-text');
            const resultDiv = document.getElementById('ai-summary-' + descId.split('-')[1]);
            btn.disabled = true;
            btn.textContent = 'ìš”ì•½ ì¤‘...';
            fetch('/travel/ai_summarize/', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ text: text })
            })
            .then(res => res.json())
            .then(data => {
                if (data.summary) {
                    resultDiv.textContent = data.summary;
                } else {
                    resultDiv.textContent = 'ìš”ì•½ ì‹¤íŒ¨: ' + (data.error || 'ì˜¤ë¥˜');
                }
            })
            .catch(() => {
                resultDiv.textContent = 'ìš”ì•½ ìš”ì²­ ì¤‘ ì˜¤ë¥˜ ë°œìƒ';
            })
            .finally(() => {
                btn.disabled = false;
                btn.textContent = 'AI 3ì¤„ ìš”ì•½ ë°›ê¸°';
            });
        };
    });
}
document.addEventListener('DOMContentLoaded', bindAISummaryButtons);
</script>
{% endblock %} 